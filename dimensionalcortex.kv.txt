# dimensionalcortex.kv - Kivy Layout File

#:kivy 2.0

<WelcomeScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 40
        spacing: 20
        canvas.before:
            Color:
                rgba: 0.06, 0.05, 0.16, 1
            Rectangle:
                pos: self.pos
                size: self.size

        Widget:
            size_hint_y: 0.3

        Label:
            text: '‚ö°'
            font_size: '80sp'
            size_hint_y: 0.2

        Label:
            text: 'Dimensional Cortex'
            font_size: '32sp'
            bold: True
            size_hint_y: 0.1
            color: 0.4, 0.5, 0.92, 1

        Label:
            text: 'Universal AI Continuity Engine'
            font_size: '16sp'
            size_hint_y: 0.1
            color: 0.63, 0.63, 0.63, 1

        Widget:
            size_hint_y: 0.3


<SetupScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 40
        spacing: 20

        Widget:
            size_hint_y: 0.3

        Label:
            text: root.status_text
            font_size: '18sp'
            size_hint_y: 0.1
            color: 0.88, 0.88, 0.88, 1

        Widget:
            size_hint_y: 0.6


<DashboardScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 10
        spacing: 10

        # Header
        BoxLayout:
            size_hint_y: 0.12
            padding: 10
            canvas.before:
                Color:
                    rgba: 0.1, 0.1, 0.2, 0.8
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [15,]

            Label:
                text: '‚ö° Dimensional Cortex'
                font_size: '24sp'
                bold: True
                color: 0.4, 0.5, 0.92, 1
                size_hint_x: 0.7

            Button:
                text: '‚öô'
                font_size: '24sp'
                size_hint_x: 0.15
                background_color: 0.2, 0.2, 0.3, 1
                on_press: root.manager.current = 'settings'

            Button:
                text: '‚Üë'
                font_size: '24sp'
                size_hint_x: 0.15
                background_color: 0.4, 0.5, 0.92, 1
                on_press: root.manager.current = 'upgrade'

        # Stats Cards
        GridLayout:
            cols: 2
            rows: 2
            spacing: 10
            size_hint_y: 0.25

            # Card 1: Memories
            BoxLayout:
                orientation: 'vertical'
                padding: 10
                canvas.before:
                    Color:
                        rgba: 0.1, 0.1, 0.2, 0.8
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10,]

                Label:
                    text: 'MEMORIES'
                    font_size: '12sp'
                    size_hint_y: 0.3
                    color: 0.63, 0.63, 0.63, 1

                Label:
                    text: str(root.total_nodes)
                    font_size: '32sp'
                    bold: True
                    size_hint_y: 0.5
                    color: 1, 1, 1, 1

                Label:
                    text: 'DataNodes'
                    font_size: '10sp'
                    size_hint_y: 0.2
                    color: 0.5, 0.5, 0.5, 1

            # Card 2: Crystals
            BoxLayout:
                orientation: 'vertical'
                padding: 10
                canvas.before:
                    Color:
                        rgba: 0.1, 0.1, 0.2, 0.8
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10,]

                Label:
                    text: 'CRYSTALS'
                    font_size: '12sp'
                    size_hint_y: 0.3
                    color: 0.63, 0.63, 0.63, 1

                Label:
                    text: str(root.total_crystals)
                    font_size: '32sp'
                    bold: True
                    size_hint_y: 0.5
                    color: 1, 1, 1, 1

                Label:
                    text: f'{root.quasi_count} QUASI'
                    font_size: '10sp'
                    size_hint_y: 0.2
                    color: 0.94, 0.58, 0.95, 1

            # Card 3: Energy
            BoxLayout:
                orientation: 'vertical'
                padding: 10
                canvas.before:
                    Color:
                        rgba: 0.1, 0.1, 0.2, 0.8
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10,]

                Label:
                    text: 'ENERGY'
                    font_size: '12sp'
                    size_hint_y: 0.3
                    color: 0.63, 0.63, 0.63, 1

                Label:
                    text: f'{root.energy_presence}%'
                    font_size: '32sp'
                    bold: True
                    size_hint_y: 0.5
                    color: 1, 1, 1, 1

                Label:
                    text: 'Presence'
                    font_size: '10sp'
                    size_hint_y: 0.2
                    color: 0.5, 0.5, 0.5, 1

            # Card 4: Platforms
            BoxLayout:
                orientation: 'vertical'
                padding: 10
                canvas.before:
                    Color:
                        rgba: 0.1, 0.1, 0.2, 0.8
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10,]

                Label:
                    text: 'PLATFORMS'
                    font_size: '12sp'
                    size_hint_y: 0.3
                    color: 0.63, 0.63, 0.63, 1

                Label:
                    text: str(sum(p['count'] for p in root.platform_stats))
                    font_size: '32sp'
                    bold: True
                    size_hint_y: 0.5
                    color: 1, 1, 1, 1

                Label:
                    text: 'Conversations'
                    font_size: '10sp'
                    size_hint_y: 0.2
                    color: 0.5, 0.5, 0.5, 1

        # Platform Bars
        BoxLayout:
            orientation: 'vertical'
            spacing: 5
            padding: 10
            size_hint_y: 0.25
            canvas.before:
                Color:
                    rgba: 0.1, 0.1, 0.2, 0.8
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [10,]

            Label:
                text: 'üåê Platform Contributions'
                font_size: '16sp'
                size_hint_y: 0.2
                color: 1, 1, 1, 1

            BoxLayout:
                orientation: 'vertical'
                spacing: 3

                # ChatGPT bar
                BoxLayout:
                    size_hint_y: 0.33
                    Label:
                        text: 'ChatGPT'
                        size_hint_x: 0.3
                        color: 0.06, 0.64, 0.50, 1
                    Widget:
                        size_hint_x: 0.5
                        canvas.before:
                            Color:
                                rgba: 0.06, 0.64, 0.50, 0.3
                            Rectangle:
                                pos: self.pos
                                size: self.size
                            Color:
                                rgba: 0.06, 0.64, 0.50, 1
                            Rectangle:
                                pos: self.pos
                                size: self.width * (root.platform_stats[0]['percent'] / 100.0), self.height
                    Label:
                        text: f"{root.platform_stats[0]['percent']}%"
                        size_hint_x: 0.2
                        color: 1, 1, 1, 1

                # Claude bar
                BoxLayout:
                    size_hint_y: 0.33
                    Label:
                        text: 'Claude'
                        size_hint_x: 0.3
                        color: 0.85, 0.47, 0.02, 1
                    Widget:
                        size_hint_x: 0.5
                        canvas.before:
                            Color:
                                rgba: 0.85, 0.47, 0.02, 0.3
                            Rectangle:
                                pos: self.pos
                                size: self.size
                            Color:
                                rgba: 0.85, 0.47, 0.02, 1
                            Rectangle:
                                pos: self.pos
                                size: self.width * (root.platform_stats[1]['percent'] / 100.0), self.height
                    Label:
                        text: f"{root.platform_stats[1]['percent']}%"
                        size_hint_x: 0.2
                        color: 1, 1, 1, 1

                # Perplexity bar
                BoxLayout:
                    size_hint_y: 0.33
                    Label:
                        text: 'Perplexity'
                        size_hint_x: 0.3
                        color: 0.39, 0.40, 0.95, 1
                    Widget:
                        size_hint_x: 0.5
                        canvas.before:
                            Color:
                                rgba: 0.39, 0.40, 0.95, 0.3
                            Rectangle:
                                pos: self.pos
                                size: self.size
                            Color:
                                rgba: 0.39, 0.40, 0.95, 1
                            Rectangle:
                                pos: self.pos
                                size: self.width * (root.platform_stats[2]['percent'] / 100.0), self.height
                    Label:
                        text: f"{root.platform_stats[2]['percent']}%"
                        size_hint_x: 0.2
                        color: 1, 1, 1, 1

        # Insights
        BoxLayout:
            orientation: 'vertical'
            padding: 10
            spacing: 5
            size_hint_y: 0.28
            canvas.before:
                Color:
                    rgba: 0.1, 0.1, 0.2, 0.8
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [10,]

            Label:
                text: 'üîó Cross-Platform Insights'
                font_size: '16sp'
                size_hint_y: 0.2
                color: 1, 1, 1, 1

            ScrollView:
                BoxLayout:
                    orientation: 'vertical'
                    spacing: 5
                    size_hint_y: None
                    height: self.minimum_height

                    # Dynamic insights
                    BoxLayout:
                        orientation: 'vertical'
                        spacing: 3
                        size_hint_y: None
                        height: 60 * len(root.insights)

                        # This would be populated dynamically in real app
                        Label:
                            text: root.insights[0]['title'] if root.insights else ''
                            font_size: '14sp'
                            size_hint_y: None
                            height: 30
                            color: 1, 1, 1, 1

        # Bottom Nav
        BoxLayout:
            size_hint_y: 0.1
            spacing: 5

            Button:
                text: 'üìä\nDashboard'
                background_color: 0.4, 0.5, 0.92, 1
                on_press: root.manager.current = 'dashboard'

            Button:
                text: 'üîó\nInsights'
                background_color: 0.2, 0.2, 0.3, 1
                on_press: root.manager.current = 'insights'

            Button:
                text: '‚ö°\nUpgrade'
                background_color: 0.2, 0.2, 0.3, 1
                on_press: root.manager.current = 'upgrade'


<UpgradeScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 10

        Label:
            text: '‚ö° Upgrade Your Continuity'
            font_size: '24sp'
            bold: True
            size_hint_y: 0.1
            color: 0.4, 0.5, 0.92, 1

        ScrollView:
            size_hint_y: 0.8

            GridLayout:
                cols: 1
                spacing: 10
                size_hint_y: None
                height: self.minimum_height
                padding: 10

                # Free Tier
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_y: None
                    height: 200
                    padding: 15
                    canvas.before:
                        Color:
                            rgba: 0.1, 0.1, 0.2, 0.8
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [10,]

                    Label:
                        text: 'Free'
                        font_size: '24sp'
                        bold: True
                        size_hint_y: 0.2
                    Label:
                        text: '$0/month'
                        font_size: '32sp'
                        color: 0.4, 0.5, 0.92, 1
                        size_hint_y: 0.3
                    Label:
                        text: '1,000 conversations\n100 crystals\nSingle platform'
                        size_hint_y: 0.4
                    Button:
                        text: 'Current Tier'
                        size_hint_y: 0.1
                        background_color: 0.3, 0.3, 0.4, 1

                # Pro Tier
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_y: None
                    height: 220
                    padding: 15
                    canvas.before:
                        Color:
                            rgba: 0.4, 0.5, 0.92, 0.2
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [10,]
                        Color:
                            rgba: 0.4, 0.5, 0.92, 1
                        Line:
                            rounded_rectangle: self.pos + self.size + [10,]
                            width: 2

                    Label:
                        text: 'Pro ‚≠ê'
                        font_size: '24sp'
                        bold: True
                        size_hint_y: 0.15
                    Label:
                        text: '$9.99/month'
                        font_size: '32sp'
                        color: 0.4, 0.5, 0.92, 1
                        size_hint_y: 0.25
                    Label:
                        text: '10,000 conversations\n1,000 crystals\nAll platforms\nQUASI evolution'
                        size_hint_y: 0.45
                    Button:
                        text: 'Upgrade to Pro'
                        size_hint_y: 0.15
                        background_color: 0.4, 0.5, 0.92, 1
                        on_press: root.select_tier('pro')

                # Lifetime Tier
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_y: None
                    height: 200
                    padding: 15
                    canvas.before:
                        Color:
                            rgba: 0.1, 0.1, 0.2, 0.8
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [10,]

                    Label:
                        text: 'Lifetime'
                        font_size: '24sp'
                        bold: True
                        size_hint_y: 0.2
                    Label:
                        text: '$299 one-time'
                        font_size: '28sp'
                        color: 0.94, 0.58, 0.95, 1
                        size_hint_y: 0.3
                    Label:
                        text: 'Everything in Pro\nLifetime updates\nFounding member'
                        size_hint_y: 0.4
                    Button:
                        text: 'Get Lifetime'
                        size_hint_y: 0.1
                        background_color: 0.94, 0.58, 0.95, 1
                        on_press: root.select_tier('lifetime')

        Button:
            text: '‚Üê Back'
            size_hint_y: 0.1
            background_color: 0.2, 0.2, 0.3, 1
            on_press: root.manager.current = 'dashboard'


<SettingsScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 10

        Label:
            text: '‚öô Settings'
            font_size: '24sp'
            size_hint_y: 0.1

        BoxLayout:
            orientation: 'vertical'
            size_hint_y: 0.8
            spacing: 10

            Label:
                text: 'Platform Capture'
                size_hint_y: 0.1

            Button:
                text: 'Clear All Data'
                size_hint_y: 0.1
                background_color: 0.94, 0.26, 0.26, 1
                on_press: root.clear_data()

        Button:
            text: '‚Üê Back'
            size_hint_y: 0.1
            background_color: 0.2, 0.2, 0.3, 1
            on_press: root.manager.current = 'dashboard'
