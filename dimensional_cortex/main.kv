#:kivy 2.1.0

# Define the color palette
#:set background_color "#2C3E50"  # Dark Grey-Blue
#:set neon_accent_color "#76D7C4" # Muted Neon Teal/Cyan
#:set text_color "#ECF0F1"       # Light Grey for body text

# Define the font
#:set font_name "Roboto"

# Base styles for widgets
<StyledLabel@Label>:
    font_name: font_name
    color: neon_accent_color
    font_size: '24sp'

<BodyLabel@Label>:
    font_name: font_name
    color: text_color
    font_size: '16sp'
    text_size: self.width, None
    halign: 'center'

<StyledButton@Button>:
    font_name: font_name
    background_color: neon_accent_color
    color: background_color
    font_size: '18sp'
    size_hint_y: None
    height: dp(50)

# Apply a background to all screens
<Screen>:
    canvas.before:
        Color:
            rgba: root.manager.background_color if root.manager else (0,0,0,1)
        Rectangle:
            pos: self.pos
            size: self.size

# Reusable Navigation Bar
<Navigation@BoxLayout>:
    size_hint_y: None
    height: dp(55)
    orientation: 'horizontal'
    canvas.before:
        Color:
            rgba: get_color_from_hex("#202B38")
        Rectangle:
            pos: self.pos
            size: self.size
    Button:
        text: "Dashboard"
        background_color: 0,0,0,0
        color: get_color_from_hex(neon_accent_color) if root.parent.parent.name == 'dashboard' else get_color_from_hex(text_color)
        on_release: app.root.current = 'dashboard'
    Button:
        text: "Insights"
        background_color: 0,0,0,0
        color: get_color_from_hex(neon_accent_color) if root.parent.parent.name == 'insights' else get_color_from_hex(text_color)
        on_release: app.root.current = 'insights'
    Button:
        text: "Vectors"
        background_color: 0,0,0,0
        color: get_color_from_hex(neon_accent_color) if root.parent.parent.name == 'vectors' else get_color_from_hex(text_color)
        on_release: app.root.current = 'vectors'
    Button:
        text: "Trade"
        background_color: 0,0,0,0
        color: get_color_from_hex(neon_accent_color) if root.parent.parent.name == 'trade' else get_color_from_hex(text_color)
        on_release: app.root.current = 'trade'
    Button:
        text: "Settings"
        background_color: 0,0,0,0
        color: get_color_from_hex(neon_accent_color) if root.parent.parent.name == 'settings' else get_color_from_hex(text_color)
        on_release: app.root.current = 'settings'

# Base Screen Layout
<ScreenBase@Screen>:
    BoxLayout:
        orientation: 'vertical'

        # Header
        BoxLayout:
            size_hint_y: None
            height: dp(60)
            padding: dp(10)
            canvas.before:
                Color:
                    rgba: get_color_from_hex("#202B38")
                Rectangle:
                    pos: self.pos
                    size: self.size
            StyledLabel:
                text: root.title
                font_size: '28sp'

        # Main Content Area
        BoxLayout:
            id: content_area
            padding: dp(20)

        # Navigation
        Navigation:

<OnboardingScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: dp(30)
        spacing: dp(20)

        BoxLayout: # Spacer
            size_hint_y: 1

        StyledLabel:
            text: "Welcome to Dimensional Cortex"
            font_size: '32sp'
            halign: 'center'

        BodyLabel:
            text: "The future of cross-platform AI memory continuity. Let's get your digital brain set up."

        BoxLayout: # Spacer
            size_hint_y: 1.5

        StyledButton:
            text: "Get Started"
            on_release: root.manager.current = 'dashboard'

        BoxLayout: # Spacer
            size_hint_y: 0.2

<DashboardScreen>:
    title: "Dashboard"
    BoxLayout:
        BodyLabel:
            text: "Continuity stats and insights will appear here."

<InsightCard@BoxLayout>:
    orientation: 'vertical'
    padding: dp(15)
    spacing: dp(10)
    size_hint_y: None
    height: dp(120)
    canvas.before:
        Color:
            rgba: get_color_from_hex("#202B38")
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [10, 10, 10, 10]
    StyledLabel:
        text: "Insight Title"
        font_size: '20sp'
        halign: 'left'
    BodyLabel:
        text: "This is a placeholder for an AI-generated insight based on your cross-platform conversations."
        halign: 'left'

<InsightsScreen>:
    title: "Insights"
    ScrollView:
        GridLayout:
            cols: 1
            padding: dp(20)
            spacing: dp(15)
            size_hint_y: None
            height: self.minimum_height
            InsightCard:
            InsightCard:
            InsightCard:

<VectorEntry@BoxLayout>:
    size_hint_y: None
    height: dp(80)
    padding: dp(10)
    spacing: dp(15)

    # Placeholder for the crystal icon
    BoxLayout:
        size_hint_x: None
        width: dp(60)
        canvas:
            Color:
                rgba: root.crystal_color
            Ellipse:
                pos: self.pos[0] + dp(5), self.pos[1] + dp(10)
                size: dp(50), dp(50)

    BoxLayout:
        orientation: 'vertical'
        StyledLabel:
            text: root.title
            halign: 'left'
            font_size: '18sp'
        BodyLabel:
            text: root.subtitle
            halign: 'left'

<VectorsScreen>:
    title: "Vectors"
    ScrollView:
        GridLayout:
            cols: 1
            padding: dp(20)
            spacing: dp(15)
            size_hint_y: None
            height: self.minimum_height

            StyledLabel:
                text: "Your Vectors"
                halign: 'left'
                size_hint_y: None
                height: dp(40)

            VectorEntry:
                title: "Project Phoenix"
                subtitle: "Knowledge about AI-driven project management."
                crystal_color: get_color_from_hex("#E74C3C") # Red
            VectorEntry:
                title: "Quantum Computing Research"
                subtitle: "Notes and articles on quantum mechanics."
                crystal_color: get_color_from_hex("#3498DB") # Blue

            StyledLabel:
                text: "System Vectors"
                halign: 'left'
                size_hint_y: None
                height: dp(40)

            VectorEntry:
                title: "General Knowledge"
                subtitle: "The default vector for everyday conversations."
                crystal_color: get_color_from_hex("#95A5A6") # Grey

<GlowingButton@Button>:
    font_name: font_name
    background_color: get_color_from_hex("#F1C40F") # Vibrant Yellow/Gold
    color: background_color
    font_size: '20sp'
    size_hint_y: None
    height: dp(55)
    # Basic "glow" effect with a border
    border: (10, 10, 10, 10)
    background_normal: '' # Needed to show background_color
    background_down: ''

<TradeProgramScreen>:
    title: "Trade Program"
    BoxLayout:
        orientation: 'vertical'
        padding: dp(30)
        spacing: dp(20)

        # Placeholder for animation
        BoxLayout:
            size_hint_y: 1.5
            canvas.before:
                Color:
                    rgba: 0,0,0,0.2
                Rectangle:
                    pos: self.pos
                    size: self.size
            BodyLabel:
                text: "[ Animated Graphic of Crystal Trading ]"

        StyledLabel:
            text: "Memory Crystal Exchange"
            font_size: '32sp'
            halign: 'center'
            size_hint_y: 0.5

        BodyLabel:
            text: "Trade your evolved memory crystals for exclusive access to new features, advanced AI models, and more."
            size_hint_y: 0.8

        GlowingButton:
            text: "Initiate Trade"

<SettingsEntry@BoxLayout>:
    size_hint_y: None
    height: dp(60)
    padding: dp(10)

    BoxLayout:
        orientation: 'vertical'
        BodyLabel:
            text: root.title
            halign: 'left'
            font_size: '18sp'
        BodyLabel:
            text: root.subtitle
            halign: 'left'
            font_size: '14sp'
            color: .7, .7, .7, 1

    Switch:
        size_hint_x: None
        width: dp(60)

<SettingsScreen>:
    title: "Settings"
    ScrollView:
        GridLayout:
            cols: 1
            padding: dp(20)
            spacing: dp(15)
            size_hint_y: None
            height: self.minimum_height
            SettingsEntry:
                title: "Enable Cloud Sync"
                subtitle: "Sync your data across devices (Pro)"
            SettingsEntry:
                title: "Conversation Capture"
                subtitle: "Automatically capture conversations"
            SettingsEntry:
                title: "Enable Notifications"
                subtitle: "Get notified of new insights"

<AboutScreen>:
    BoxLayout:
        Label:
            text: "About UDAC"
